Пример шлюза с авторизацией и пополнением аккаунта написан на Python3

Необходимые библиотеки:
pip3 install wheel 
pip3 install peewee psycopg2-binary tornado requests 
pip3 install -U requests[socks]
pip3 --no-cache-dir install crowdwiz

В качестве интерфейса для баз данных используется PeeWee он не зависит от движка баз данных, в примере я использую локальную базу, но можно и Postgres

В комплекте 4 файла:
1) config.py - конфигурационный файл, в нём хранятся все настройки и в нём нужно указать логин шлюза, а также его активный приватный ключ и приватный ключ примечаний, также там нужно указат ключ телеграм бота. Бота можно зарегистрировать через @BotFather. Также в конфиге есть параметры подключения к базе данных и настройки прокси для серверов телеграма (потому что в России эти сервера часто забанены). Также параметры deposit_rate и withdraw_rate тоже хранятся в этом файле. В продакшне вместо конфига скорее всего нужно использовать базу данных!
2) models.py - описывает 3 таблицы, в одной хранятся параметры бота, во втрой пользователи и их локальные балансы, а в третей история пополнений
3) server.py - собственно сам шлюз, который в качестве фронтенда, просто для демонстрационных целей использует телеграм, однако вы можете использовать любой другой фронтенд и бэкенд, но принцип работы будет точно такой же и все функции можно легко адаптировать.
4) telegram_common.py - содержит в себе базовые функции для написания телеграм бота

Запуск бота:
- Сначала нужно заполнить config.py
- Затем запустить файл python3 models.py он создаст необходимые базы данных и таблицы
- Затем запускаем python3 server.py и можно играться